<!--
  Ù…Ø´Ø±ÙˆØ¹ Ù…ÙˆÙ‚Ø¹ ØªÙˆØ§ØµÙ„ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ Ù…ØªÙƒØ§Ù…Ù„ ÙŠØ´Ø¨Ù‡ Instagram/FacebookØŒ ÙŠØªØ¶Ù…Ù†:
  - ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
  - ØµÙ„Ø§Ø­ÙŠØ§Øª Ø®Ø§ØµØ© Ù„Ø­Ø³Ø§Ø¨ ZERO
  - Ù…Ù†Ø´ÙˆØ±Ø§Øª ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù†ØµÙˆØµ ÙˆØµÙˆØ±ØŒ Ù„Ø§ÙŠÙƒØ§Øª ÙˆØªØ¹Ù„ÙŠÙ‚Ø§Øª
  - Ø´Ø§Øª Ø®Ø§ØµØŒ Ø·Ù„Ø¨Ø§Øª ØµØ¯Ø§Ù‚Ø©ØŒ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
  - Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ ÙˆØªØ¹Ø¯ÙŠÙ„Ù‡ (Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„ØµÙˆØ±Ø©ØŒ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯)
  - Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
  - Ø¯Ø¹Ù… Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†
  - ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠÙ‹Ø§ (localStorage)
  - ØªØµÙ…ÙŠÙ… Ø£Ø³Ø·ÙˆØ±ÙŠ ÙØ®Ù… Ø£Ø³ÙˆØ¯ + Ù„Ø¨Ù†ÙŠ
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Social Media Legend</title>
  <style>
    /* Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #0e0e10;
      color: #fff;
    }
    .container {
      max-width: 500px;
      margin: auto;
      padding: 20px;
    }
    input, button, textarea, select {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      border-radius: 10px;
      border: none;
      font-size: 1em;
    }
    button {
      background-color: #00acee;
      color: white;
      cursor: pointer;
    }
    .hidden { display: none; }
    .profile-pic {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      margin: 10px auto;
      display: block;
    }
    .post, .comment {
      background: #1a1a1a;
      border-radius: 10px;
      padding: 10px;
      margin: 10px 0;
    }
    .post img {
      width: 100%;
      border-radius: 10px;
      margin-top: 10px;
    }
    .btn-row {
      display: flex;
      gap: 10px;
    }
    .chat-box, .search-result {
      background: #222;
      border-radius: 10px;
      padding: 10px;
      margin-top: 10px;
    }
    .nav-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #1a1a1a;
      display: flex;
      justify-content: space-around;
      padding: 10px;
      z-index: 999;
    }
    .nav-bar button {
      flex: 1;
    }
  </style>
</head>
<body>
  <div class="container" id="app">
    <!-- Ø³ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙƒØ§Ù…Ù„Ø© Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
  </div>
  <div class="nav-bar">
    <button onclick="navigate('home')">Ù…Ù†Ø´ÙˆØ±Ø§Øª</button>
    <button onclick="navigate('search')">Ø¨Ø­Ø«</button>
    <button onclick="navigate('chats')">Ø´Ø§Øª</button>
    <button onclick="navigate('notifications')">Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</button>
    <button onclick="navigate('settings')">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
  </div>
  <script>
    let users = JSON.parse(localStorage.getItem('users') || '{}');
    let currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');
    let posts = JSON.parse(localStorage.getItem('posts') || '[]');
    let friends = JSON.parse(localStorage.getItem('friends') || '[]');
    let chats = JSON.parse(localStorage.getItem('chats') || '[]');
    let page = 'login';

    function saveAll() {
      localStorage.setItem('users', JSON.stringify(users));
      localStorage.setItem('currentUser', JSON.stringify(currentUser));
      localStorage.setItem('posts', JSON.stringify(posts));
      localStorage.setItem('friends', JSON.stringify(friends));
      localStorage.setItem('chats', JSON.stringify(chats));
    }

    function navigate(p) {
      page = p;
      render();
    }

    function render() {
      const app = document.getElementById('app');
      if (!currentUser && page !== 'register') return renderLogin();
      if (page === 'login') return renderLogin();
      if (page === 'register') return renderRegister();
      if (page === 'home') return renderHome();
      if (page === 'search') return renderSearch();
      if (page === 'chats') return renderChats();
      if (page === 'notifications') return renderNotifications();
      if (page === 'settings') return renderSettings();
    }

    function renderLogin() {
      const app = document.getElementById('app');
      app.innerHTML = `
        <h2>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</h2>
        <input id="login-user" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" />
        <input id="login-pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" />
        <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
        <p>Ù„Ø§ ØªÙ…Ù„Ùƒ Ø­Ø³Ø§Ø¨ØŸ <a href="#" onclick="navigate('register')">Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨</a></p>
      `;
    }

    function renderRegister() {
      const app = document.getElementById('app');
      app.innerHTML = `
        <h2>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h2>
        <input id="reg-user" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" />
        <input id="reg-pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" />
        <input id="reg-pic" type="file" accept="image/*" onchange="previewImage(event, 'reg-preview')" />
        <img id="reg-preview" class="profile-pic" src="" />
        <button onclick="register()">Ø¥Ù†Ø´Ø§Ø¡</button>
        <p>Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <a href="#" onclick="navigate('login')">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</a></p>
      `;
    }

    function previewImage(event, id) {
      const output = document.getElementById(id);
      const file = event.target.files[0];
      const reader = new FileReader();
      reader.onload = () => output.src = reader.result;
      reader.readAsDataURL(file);
    }

    function login() {
      const user = document.getElementById('login-user').value;
      const pass = document.getElementById('login-pass').value;
      if (users[user] && users[user].password === pass) {
        currentUser = users[user];
        currentUser.username = user;
        saveAll();
        navigate('home');
      } else alert("Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
    }

    function register() {
      const user = document.getElementById('reg-user').value;
      const pass = document.getElementById('reg-pass').value;
      const img = document.getElementById('reg-preview').src;
      if (!user || !pass) return alert("Ø§Ù…Ù„Ø£ ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„");
      if (users[user]) return alert("Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„");
      users[user] = { password: pass, pic: img };
      saveAll();
      alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨");
      navigate('login');
    }

    function renderHome() {
      const app = document.getElementById('app');
      app.innerHTML = `
        <h2>Ù…Ø±Ø­Ø¨Ø§ ${currentUser.username}</h2>
        <textarea id="new-post" placeholder="Ù…Ø§Ø°Ø§ ØªÙÙƒØ±ØŸ"></textarea>
        <input id="post-image" type="file" accept="image/*" onchange="previewImage(event, 'post-preview')" />
        <img id="post-preview" src="" class="profile-pic" />
        <button onclick="createPost()">Ù†Ø´Ø±</button>
        ${posts.map(post => `
          <div class="post">
            <b>${post.user}</b>
            <p>${post.text}</p>
            ${post.image ? `<img src="${post.image}" />` : ''}
            <div class="btn-row">
              <button onclick="toggleComments('${post.id}')">ğŸ’¬ ØªØ¹Ù„ÙŠÙ‚Ø§Øª</button>
              ${post.user === currentUser.username ? `<button onclick="deletePost('${post.id}')">ğŸ—‘ Ø­Ø°Ù</button>` : ''}
            </div>
            <div id="comments-${post.id}" class="hidden">
              ${(post.comments || []).map(c => `<div class="comment">${c.user}: ${c.text}</div>`).join('')}
              <input placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚..." onkeydown="if(event.key==='Enter') addComment('${post.id}', this.value)" />
            </div>
          </div>
        `).join('')}
      `;
    }

    function createPost() {
      const text = document.getElementById('new-post').value;
      const img = document.getElementById('post-preview').src;
      if (!text && img === '') return;
      posts.unshift({ id: Date.now()+"", user: currentUser.username, text, image: img !== '' ? img : null, comments: [] });
      saveAll();
      render();
    }

    function deletePost(id) {
      posts = posts.filter(p => p.id !== id);
      saveAll();
      render();
    }

    function toggleComments(id) {
      const el = document.getElementById('comments-' + id);
      el.classList.toggle('hidden');
    }

    function addComment(postId, text) {
      const post = posts.find(p => p.id === postId);
      if (!post.comments) post.comments = [];
      post.comments.push({ user: currentUser.username, text });
      saveAll();
      render();
    }

    function renderSearch() {
      const app = document.getElementById('app');
      app.innerHTML = `
        <h2>Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³ØªØ®Ø¯Ù…</h2>
        <input id="search-input" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…..." oninput="doSearch(this.value)" />
        <div id="search-results"></div>
      `;
    }

    function doSearch(query) {
      const resultBox = document.getElementById('search-results');
      const found = Object.keys(users).filter(u => u.includes(query));
      resultBox.innerHTML = found.map(u => `
        <div class="search-result">
          <img src="${users[u].pic}" class="profile-pic" />
          <b>${u}</b>
          <button onclick="startChat('${u}')">Ø´Ø§Øª</button>
        </div>
      `).join('');
    }

    function startChat(username) {
      alert("ÙØªØ­ Ø´Ø§Øª Ù…Ø¹ " + username);
    }

    function renderChats() {
      document.getElementById('app').innerHTML = '<h2>Ù‚Ø±ÙŠØ¨Ù‹Ø§: Ø§Ù„Ø´Ø§Øª</h2>';
    }

    function renderNotifications() {
      document.getElementById('app').innerHTML = '<h2>Ù‚Ø±ÙŠØ¨Ù‹Ø§: Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h2>';
    }

    function renderSettings() {
      document.getElementById('app').innerHTML = `
        <h2>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
        <input placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯" id="new-name" />
        <input placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©" id="new-pass" />
        <input type="file" accept="image/*" onchange="previewImage(event, 'profile-preview')" />
        <img id="profile-preview" src="${currentUser.pic}" class="profile-pic" />
        <button onclick="saveProfile()">Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
      `;
    }

    function saveProfile() {
      const name = document.getElementById('new-name').value;
      const pass = document.getElementById('new-pass').value;
      const pic = document.getElementById('profile-preview').src;
      if (name) users[currentUser.username].username = name;
      if (pass) users[currentUser.username].password = pass;
      if (pic) users[currentUser.username].pic = pic;
      currentUser.pic = pic;
      saveAll();
      alert("ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ù†Ø¬Ø§Ø­");
    }

    render();
  </script>
</body>
</html>
